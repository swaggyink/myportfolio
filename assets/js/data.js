const portfolioData = {
  items: [
    {
      id: "item24",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/gov5.jpg",
      type: "image",
    },
    {
      id: "item23",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/gov2.jpg",
      type: "image",
    },
    {
      id: "item22",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/gov-1.jpg",
      type: "image",
    },
    // {
    //   id: "item21",
    //   title: "Commercial Photography",
    //   description: "Commercial / Marketing",
    //   image: "assets/img/portfolio/new/fire.jpg",
    //   type: "image",
    // },
    // {
    //   id: "item20",
    //   title: "Commercial Photography",
    //   description: "Commercial / Marketing",
    //   image: "assets/img/portfolio/new/darl-3.jpg",
    //   type: "image",
    // },
    // {
    //   id: "item19",
    //   title: "Commercial Photography",
    //   description: "Commercial / Marketing",
    //   image: "assets/img/portfolio/new/darl-2.jpg",
    //   type: "image",
    // },
    {
      id: "item18",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/darl-1.jpg",
      type: "image",
    },
    {
      id: "item17",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/ai-shoes.jpg",
      type: "image",
    },
    // {
    //   id: "item16",
    //   title: "Commercial Photography",
    //   description: "Commercial / Marketing",
    //   image: "assets/img/portfolio/new/312.jpg",
    //   type: "image",
    // },
    {
      id: "item15",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/portfolio1.JPG",
      type: "image",
    },
    {
      id: "item14",
      title: "Event Coverage",
      description: "Events / Marketing",
      image: "assets/img/portfolio/portfolio6.png",
      video: "assets/img/portfolio/portfolio6.mp4",
      type: "video",
    },
    {
      id: "item13",
      title: "Event Coverage",
      description: "Events / Marketing",
      image: "assets/img/portfolio/portfolio5.png",
      video: "assets/img/portfolio/portfolio5.mp4",
      type: "video",
    },
    {
      id: "item12",
      title: "Event Coverage",
      description: "Events / Marketing",
      image: "assets/img/portfolio/portfolio4.png",
      video: "assets/img/portfolio/portfolio4.mp4",
      type: "video",
    },
    {
      id: "item11",
      title: "Event Coverage",
      description: "Events / Marketing",
      image: "assets/img/portfolio/video3.png",
      video: "assets/img/portfolio/video3.mp4",
      type: "video",
    },
    {
      id: "item10",
      title: "Event Coverage",
      description: "Events / Marketing",
      image: "assets/img/portfolio/video2.png",
      video: "assets/img/portfolio/video2.mp4",
      type: "video",
    },
    {
      id: "item9",
      title: "Event Coverage",
      description: "Events / Marketing",
      image: "assets/img/portfolio/video1.png",
      video: "assets/img/portfolio/video1.mp4",
      type: "video",
    },
    {
      id: "item8",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/Untitled-1.jpg",
      type: "image",
    },
    {
      id: "item7",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new/IMG_1045.jpg",
      type: "image",
    },
    // {
    //   id: "item6",
    //   title: "Commercial Photography",
    //   description: "Commercial / Marketing",
    //   image: "assets/img/portfolio/new2/IMG_7445.png",
    //   type: "image",
    // },
    {
      id: "item5",
      title: "Commercial Photography",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new2/IMG_1675.PNG",
      type: "image",
    },

    // F&B Videos
    {
      id: "item40",
      title: "Food & Beverage Video",
      description: "Commercial / F&B",
      image:
        "assets/img/portfolio/new3/F&B/videos/334F968D-BDEE-49CA-A233-0CFEB8D6BCC8.png",
      video:
        "assets/img/portfolio/new3/F&B/videos/334F968D-BDEE-49CA-A233-0CFEB8D6BCC8.MP4",
      type: "video",
    },
    {
      id: "item41",
      title: "Food & Beverage Video",
      description: "Commercial / F&B",
      image:
        "assets/img/portfolio/new3/F&B/videos/F9D10F07-97A7-46D1-9F95-E247B859A65F.png",
      video:
        "assets/img/portfolio/new3/F&B/videos/F9D10F07-97A7-46D1-9F95-E247B859A65F.MP4",
      type: "video",
    },

    {
      id: "item43",
      title: "Food & Beverage Video",
      description: "Commercial / F&B",
      image:
        "assets/img/portfolio/new3/F&B/videos/8496EE00-325C-42DD-A47A-882EBC525602.png",
      video:
        "assets/img/portfolio/new3/F&B/videos/8496EE00-325C-42DD-A47A-882EBC525602.MP4",
      type: "video",
    },
    {
      id: "item44",
      title: "Food & Beverage Video",
      description: "Commercial / F&B",
      image:
        "assets/img/portfolio/new3/F&B/videos/4376A869-B51B-4962-A345-C50AA8B20325.png",
      video:
        "assets/img/portfolio/new3/F&B/videos/4376A869-B51B-4962-A345-C50AA8B20325.MP4",
      type: "video",
    },
    // F&B Photos
    {
      id: "item45",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9460.jpg",
      type: "image",
    },
    {
      id: "item46",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9459.jpg",
      type: "image",
    },
    {
      id: "item47",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9458.jpg",
      type: "image",
    },
    {
      id: "item48",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9457.jpg",
      type: "image",
    },
    {
      id: "item49",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9456.jpg",
      type: "image",
    },
    {
      id: "item50",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9455.jpg",
      type: "image",
    },
    {
      id: "item51",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9454.jpg",
      type: "image",
    },
    {
      id: "item52",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9444.jpg",
      type: "image",
    },
    {
      id: "item53",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9440.jpg",
      type: "image",
    },
    {
      id: "item54",
      title: "Food & Beverage Photography",
      description: "Commercial / F&B",
      image: "assets/img/portfolio/new3/F&B/photos/IMG_9439.jpg",
      type: "image",
    },
    {
      id: "item38",
      title: "Sport & Fashion Video",
      description: "Commercial / Sport & Fashion",
      image: "assets/img/portfolio/new3/mx/3.png",
      video:
        "assets/img/portfolio/new3/mx/copy_283ECA2B-D4D1-4234-B627-82FFDB5BD5AB.MOV",
      type: "video",
    },
    {
      id: "item39",
      title: "Sport & Fashion Video",
      description: "Commercial / Sport & Fashion",
      image: "assets/img/portfolio/new3/mx/2.png",
      video:
        "assets/img/portfolio/new3/mx/copy_12E5B7CF-E512-409A-97B5-A1B6771173E9.MOV",
      type: "video",
    },

    {
      id: "item42",
      title: "Sport & Fashion Video",
      description: "Commercial / Sport & Fashion",
      image: "assets/img/portfolio/new3/mx/1.png ",

      video:
        "assets/img/portfolio/new3/mx/WhatsApp Video 2025-06-04 at 1.01.04 PM.mp4",

      type: "video",
    },
    {
      id: "item4",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/4.png",
      video:
        "assets/img/portfolio/new3/mx/copy_DCFDDB6F-0958-4987-A357-A48FA52471C6",
      type: "video",
    },
    {
      id: "item3",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/5.png",
      video:
        "assets/img/portfolio/new3/mx/copy_BA46AF2F-564D-4543-B228-C65A9B17BE2A.MOV",
      type: "video",
    },
    {
      id: "item2",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/6.png",
      video:
        "assets/img/portfolio/new3/mx/copy_DED4274A-B73D-4D58-9F25-14B7955BEB15.MOV",
      type: "video",
    },
    {
      id: "item1",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/7.png",
      video:
        "assets/img/portfolio/new3/mx/copy_A1899170-7224-4339-A853-BCB6ACED52A3.MOV",
      type: "video",
    },
    {
      id: "item26",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/8.png",
      video:
        "assets/img/portfolio/new3/mx/copy_B6FAE585-E768-4532-85C8-CBFA945E7DAA.MOV",
      type: "video",
    },
    {
      id: "item27",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/9.png",
      video:
        "assets/img/portfolio/new3/mx/copy_6D386B20-1B86-47D4-803E-7129FB8BF7A0.MOV",
      type: "video",
    },
    {
      id: "item26",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/10.png",
      video:
        "assets/img/portfolio/new3/mx/copy_071F1967-732F-4A95-A396-E9550871E3A6.MOV",
      type: "video",
    },
    {
      id: "item28",
      title: "Commercial Video",
      description: "Commercial / Marketing",
      image: "assets/img/portfolio/new3/mx/11.png",
      video:
        "assets/img/portfolio/new3/mx/copy_34825935-78B4-4F45-9E08-8FEFD9625E7F.MOV",
      type: "video",
    },
    // {
    //   id: "item26",
    //   title: "Commercial Video",
    //   description: "Commercial / Marketing",
    //   image: "assets/img/portfolio/new3/mx/8.png",
    //   video:
    //     "assets/img/portfolio/new3/mx/",
    //   type: "video",
    // },
    // F&B Photos

    // {
    //   id: "item26",
    //   title: "Food & Beverage Photography",
    //   description: "Commercial / F&B",
    //   image: "assets/img/portfolio/new3/F&B/photos/IMG_9459.jpg",
    //   type: "image",
    // },
    // {
    //   id: "item27",
    //   title: "Food & Beverage Photography",
    //   description: "Commercial / F&B",
    //   image: "assets/img/portfolio/new3/F&B/photos/IMG_9458.jpg",
    //   type: "image",
    // },
    // {
    //   id: "item28",
    //   title: "Food & Beverage Photography",
    //   description: "Commercial / F&B",
    //   image: "assets/img/portfolio/new3/F&B/photos/IMG_9457.jpg",
    //   type: "image",
    // },
    // {
    //   id: "item29",
    //   title: "Food & Beverage Photography",
    //   description: "Commercial / F&B",
    //   image: "assets/img/portfolio/new3/F&B/photos/IMG_9456.jpg",
    //   type: "image",
    // },
    // {
    //   id: "item30",
    //   title: "Food & Beverage Photography",
    //   description: "Commercial / F&B",
    //   image: "assets/img/portfolio/new3/F&B/photos/IMG_9455.jpg",
    //   type: "image",
    // },
    // F&B Videos
    // {
    //   id: "item31",
    //   title: "Food & Beverage Video",
    //   description: "Commercial / F&B",
    //   image:
    //     "assets/img/portfolio/new3/F&B/videos/334F968D-BDEE-49CA-A233-0CFEB8D6BCC8.png",
    //   video:
    //     "assets/img/portfolio/new3/F&B/videos/334F968D-BDEE-49CA-A233-0CFEB8D6BCC8.MP4",
    //   type: "video",
    // },
    // {
    //   id: "item32",
    //   title: "Food & Beverage Video",
    //   description: "Commercial / F&B",
    //   image:
    //     "assets/img/portfolio/new3/F&B/videos/F9D10F07-97A7-46D1-9F95-E247B859A65F.png",
    //   video:
    //     "assets/img/portfolio/new3/F&B/videos/F9D10F07-97A7-46D1-9F95-E247B859A65F.MP4",
    //   type: "video",
    // },
    // Sport & Fashion Videos
    // {
    //   // remove
    //   id: "item33",
    //   title: "Sport & Fashion Video",
    //   description: "Commercial / Sport & Fashion",
    //   image: "assets/img/portfolio/new3/Mix sport- fashion/portfolio5.MP4",
    //   video: "assets/img/portfolio/new3/Mix sport- fashion/portfolio5.MP4",
    //   type: "video",
    // },
    // {
    //   id: "item34",
    //   title: "Sport & Fashion Video",
    //   description: "Commercial / Sport & Fashion",
    //   image: "assets/img/portfolio/new3/Mix sport- fashion/portfolio6.MP4",
    //   video: "assets/img/portfolio/new3/Mix sport- fashion/portfolio6.MP4",
    //   type: "video",
    // },
    // Sport & Fashion Videos
    // {
    //   id: "item35",
    //   title: "Sport & Fashion Video",
    //   description: "Commercial / Sport & Fashion",
    //   image:
    //     "assets/img/portfolio/new3/Mix sport- fashion/copy_7D0D578A-484C-42EE-8D35-061BA5754584.MOV",
    //   video:
    //     "assets/img/portfolio/new3/Mix sport- fashion/copy_7D0D578A-484C-42EE-8D35-061BA5754584.MOV",
    //   type: "video",
    // },
    // {
    //   id: "item36",
    //   title: "Sport & Fashion Video",
    //   description: "Commercial / Sport & Fashion",
    //   image:
    //     "assets/img/portfolio/new3/Mix sport- fashion/copy_F3EA6FB8-9827-43A8-9E66-3CA8E2D5EADA.MOV",
    //   video:
    //     "assets/img/portfolio/new3/Mix sport- fashion/copy_F3EA6FB8-9827-43A8-9E66-3CA8E2D5EADA.MOV",
    //   type: "video",
    // },
    // {
    //   id: "item37",
    //   title: "Sport & Fashion Video",
    //   description: "Commercial / Sport & Fashion",
    //   image:
    //     "assets/img/portfolio/new3/Mix sport- fashion/copy_12E5B7CF-E512-409A-97B5-A1B6771173E9.MOV",
    //   video:
    //     "assets/img/portfolio/new3/Mix sport- fashion/copy_12E5B7CF-E512-409A-97B5-A1B6771173E9.MOV",
    //   type: "video",
    // },
  ],
};

const cardContainer = document.getElementById("card-container");
if (cardContainer) {
  // Clear existing content
  cardContainer.innerHTML = "";

  // Number of items to show initially
  const itemsPerPage = 6;
  let currentPage = 1;
  let gallery = null; // Single gallery instance

  function createPortfolioItem(item, index) {
    const newCard = document.createElement("div");
    newCard.classList.add("col-lg-4", "col-md-6");

    if (item.type === "video") {
      newCard.innerHTML = `     
      <div class="st-portfolio-single st-style1" data-index="${index}">
        <div class="st-portfolio-item">
          <img src="assets/img/di9rnbxjT.gif" alt="portfolio" class="play-btn-overlay">
          <div class="st-portfolio st-zoom" data-type="video" data-src="${item.video}" data-poster="${item.image}" data-index="${index}">
            <div class="st-portfolio-img st-zoom-in">
              <img src="${item.image}" alt="portfolio">
            </div>
            <div class="st-portfolio-item-hover">
              <i class="fas fa-plus-circle"></i>
              <h5>${item.title}</h5>
              <p>${item.description}</p>
            </div>
          </div>
        </div>
      </div>`;
    } else {
      newCard.innerHTML = `
      <div class="st-portfolio-single st-style1" data-index="${index}">
        <div class="st-portfolio-item">
          <div class="st-portfolio st-zoom" data-type="image" data-src="${item.image}" data-index="${index}">
            <div class="st-portfolio-img st-zoom-in">
              <img src="${item.image}" alt="portfolio">
            </div>
            <div class="st-portfolio-item-hover">
              <i class="fas fa-plus-circle"></i>
              <h5>${item.title}</h5>
              <p>${item.description}</p>
            </div>
          </div>
        </div>
      </div>`;
    }

    return newCard;
  }

  function displayItems(page) {
    // Calculate start and end indices for current page
    const startIndex = (page - 1) * itemsPerPage;
    const endIndex = page * itemsPerPage;

    // Get items and reverse them for display
    const itemsToShow = [...portfolioData.items]
      .reverse()
      .slice(startIndex, endIndex);

    // Add new items to the container
    itemsToShow.forEach((item, index) => {
      const newCard = createPortfolioItem(
        item,
        portfolioData.items.length - 1 - (startIndex + index)
      );
      cardContainer.appendChild(newCard);
    });

    // Show/hide load more button
    const loadMoreBtn = document.getElementById("load-more-btn");
    if (loadMoreBtn) {
      loadMoreBtn.style.display =
        endIndex >= portfolioData.items.length ? "none" : "block";
    }

    // Reinitialize gallery for new items
    initializeGallery();
  }

  // Create load more button
  const loadMoreContainer = document.createElement("div");
  loadMoreContainer.className = "col-12 text-center mt-4";
  loadMoreContainer.style.display = "flex";
  loadMoreContainer.style.justifyContent = "center";
  loadMoreContainer.innerHTML = `
    <button id="load-more-btn" class="st-btn st-style1 st-color1">Load More</button>
  `;
  cardContainer.parentNode.appendChild(loadMoreContainer);

  // Initial display
  displayItems(currentPage);

  // Load more button click handler
  const loadMoreBtn = document.getElementById("load-more-btn");
  if (loadMoreBtn) {
    loadMoreBtn.addEventListener("click", () => {
      currentPage++;
      displayItems(currentPage);
    });
  }

  function initializeGallery() {
    // Create gallery if it doesn't exist
    if (!gallery) {
      gallery = document.createElement("div");
      gallery.className = "custom-gallery";
      gallery.innerHTML = `
        <div class="gallery-overlay"></div>
        <div class="gallery-content">
          <button class="gallery-close">&times;</button>
          <button class="gallery-prev">&lt;</button>
          <button class="gallery-next">&gt;</button>
          <div class="gallery-media"></div>
          <div class="gallery-caption">
            <h3></h3>
            <p></p>
          </div>
        </div>
      `;
      document.body.appendChild(gallery);
    }

    const mediaContainer = gallery.querySelector(".gallery-media");
    const caption = gallery.querySelector(".gallery-caption");
    const overlay = gallery.querySelector(".gallery-overlay");
    const closeBtn = gallery.querySelector(".gallery-close");
    const prevBtn = gallery.querySelector(".gallery-prev");
    const nextBtn = gallery.querySelector(".gallery-next");
    let currentIndex = 0;

    function showGallery(index) {
      currentIndex = index;
      const item = portfolioData.items[index];
      const mediaElement =
        item.type === "video"
          ? `<video src="${item.video}" poster="${item.image}" controls></video>`
          : `<img src="${item.image}" alt="${item.title}">`;

      mediaContainer.innerHTML = mediaElement;
      caption.querySelector("h3").textContent = item.title;
      caption.querySelector("p").textContent = item.description;
      gallery.classList.add("active");
      document.body.style.overflow = "hidden";
    }

    function hideGallery() {
      gallery.classList.remove("active");
      document.body.style.overflow = "";
      if (mediaContainer.querySelector("video")) {
        mediaContainer.querySelector("video").pause();
      }
    }

    function showNext() {
      currentIndex =
        (currentIndex - 1 + portfolioData.items.length) %
        portfolioData.items.length;
      showGallery(currentIndex);
    }

    function showPrev() {
      currentIndex = (currentIndex + 1) % portfolioData.items.length;
      showGallery(currentIndex);
    }

    // Remove old event listeners
    const oldItems = document.querySelectorAll(".st-portfolio.st-zoom");
    oldItems.forEach((item) => {
      const newItem = item.cloneNode(true);
      item.parentNode.replaceChild(newItem, item);
    });

    // Add new event listeners
    document.querySelectorAll(".st-portfolio.st-zoom").forEach((item) => {
      item.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();
        const index = parseInt(item.getAttribute("data-index"));
        showGallery(index);
      });
    });

    closeBtn.addEventListener("click", hideGallery);
    overlay.addEventListener("click", hideGallery);
    prevBtn.addEventListener("click", showPrev);
    nextBtn.addEventListener("click", showNext);

    // Keyboard navigation
    document.addEventListener("keydown", (e) => {
      if (!gallery.classList.contains("active")) return;

      switch (e.key) {
        case "Escape":
          hideGallery();
          break;
        case "ArrowLeft":
          showPrev();
          break;
        case "ArrowRight":
          showNext();
          break;
      }
    });
  }

  // Initial gallery setup
  initializeGallery();
} else {
  console.error("Card container element not found!");
}
